import { observable, action, computed } from "mobx";

export default class NotificationStore {

    @observable channelNotifications = {}
    @observable userID = ""

    @observable fetching = true;

    constructor(){
        this.url = window._env.URL_MESSAGE_API;
    }

    @action
    getChannelNotifications = () => {

        fetch(`${this.url}/v1/notifications`, {
            method: "GET",
            headers: {
                "X-User": this.userID
            },
        }).then(resolve => resolve.json())
            .then(json => {
                    
                    this.channelNotifications = json
                    this.fetching = false;
            })
    }


    @computed get totalNumberOfNotifications(){

        let total = 0;
        let keys = Object.keys(this.channelNotifications);

        keys.forEach( key => {
            total += this.channelNotifications[`${key}`];
        })

        return total;
    }


}